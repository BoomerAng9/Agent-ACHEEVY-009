{
  "$schema": "https://aims.dev/schemas/y-iso-standards.json",
  "name": "Yard ISO Standards",
  "version": "1.0.0",
  "description": "Internal compliance framework for the Deploy Yard workforce",

  "standards": {
    "Y-ISO-01": {
      "name": "Identity & Access",
      "description": "Service identities, least privilege, mTLS",
      "requirements": [
        "Service identities only - no shared credentials",
        "Least privilege role bindings - minimal permissions",
        "mTLS required for control-plane and worker-plane",
        "Identity verification at shift start",
        "Break-glass policy documented and auditable"
      ],
      "training_hours": 4,
      "renewal_shifts": 100,
      "audit_evidence": ["identity_logs", "role_binding_snapshots", "mtls_handshake_records"]
    },
    "Y-ISO-02": {
      "name": "Network Segmentation",
      "description": "Plane isolation and egress control",
      "requirements": [
        "User plane isolated from control/worker planes",
        "Default deny egress for Lil_Hawks",
        "Allowlist-only external access",
        "No ingress to Chicken_Hawk or Lil_Hawks from outside",
        "Segmentation map documented per Shift"
      ],
      "training_hours": 6,
      "renewal_shifts": 100,
      "audit_evidence": ["network_policy_snapshots", "egress_logs", "segmentation_attestations"]
    },
    "Y-ISO-03": {
      "name": "Secrets Discipline",
      "description": "Injection, redaction, and protection",
      "requirements": [
        "Approved injection method only (env vars, mounted secrets)",
        "No secrets in logs, receipts, or theater output",
        "Redaction enforced at source before any output",
        "Secret scopes defined per capability",
        "Rotation compliance tracked"
      ],
      "training_hours": 8,
      "renewal_shifts": 50,
      "audit_evidence": ["secret_access_logs", "redaction_verification", "injection_method_attestations"]
    },
    "Y-ISO-04": {
      "name": "Supply Chain",
      "description": "SBOM, signing, malware scanning",
      "requirements": [
        "SBOM generation for all artifacts",
        "Signature verification before deployment",
        "Malware scanning before publish/expose",
        "Registry allowlist enforcement",
        "Artifact allowlist enforcement"
      ],
      "training_hours": 6,
      "renewal_shifts": 100,
      "audit_evidence": ["sbom_records", "signature_verification_logs", "scan_results"]
    },
    "Y-ISO-05": {
      "name": "Runtime Hardening",
      "description": "Non-root, minimal images, capability drops",
      "requirements": [
        "Non-root execution mandatory",
        "Minimal base images only",
        "Capability drops applied (no CAP_SYS_ADMIN, etc.)",
        "Resource limits enforced (CPU, memory, disk)",
        "Read-only filesystem where possible"
      ],
      "training_hours": 10,
      "renewal_shifts": 100,
      "audit_evidence": ["container_config_snapshots", "capability_audit", "resource_limit_logs"]
    },
    "Y-ISO-06": {
      "name": "Evidence & Audit",
      "description": "KYB flight recorder sealing",
      "requirements": [
        "KYB flight recorder sealing per shift",
        "Immutable event stream IDs",
        "Attestation bundles stored and referenced",
        "Receipt hash generation and verification",
        "Evidence retention per policy"
      ],
      "training_hours": 4,
      "renewal_shifts": 100,
      "audit_evidence": ["flight_recorder_seals", "attestation_bundles", "receipt_hashes"]
    },
    "Y-ISO-07": {
      "name": "Incident Response",
      "description": "Anomaly triggers and response playbooks",
      "requirements": [
        "Anomaly triggers defined and monitored",
        "Quarantine playbook ready",
        "Kill switch playbook ready",
        "Rollback playbook ready",
        "Forced Guide Me on defined conditions",
        "Incident escalation path documented"
      ],
      "training_hours": 12,
      "renewal_shifts": 50,
      "audit_evidence": ["incident_logs", "playbook_execution_records", "escalation_logs"]
    }
  },

  "hr_mandates": {
    "description": "Internal workforce conduct rules",
    "mandates": [
      {
        "id": "HR-001",
        "name": "Role-Based Conduct",
        "description": "No unsafe jokes during critical incidents; maintain professionalism under pressure"
      },
      {
        "id": "HR-002",
        "name": "Escalation Etiquette",
        "description": "Proper chain of command: Lil_Hawk → Chicken_Hawk → ACHEEVY → User"
      },
      {
        "id": "HR-003",
        "name": "Mentoring Requirements",
        "description": "Foremen and above must mentor at least 2 Hatchlings per review period"
      },
      {
        "id": "HR-004",
        "name": "Promotion Ethics",
        "description": "No shortcuts around security controls; promotions based on objective metrics only"
      },
      {
        "id": "HR-005",
        "name": "Disciplinary Record",
        "description": "All violations logged; pattern analysis for systemic issues"
      }
    ]
  },

  "sop": {
    "description": "Standard Operating Procedures - how they work every time",
    "procedures": [
      {
        "id": "SOP-001",
        "name": "Roll Call",
        "phase": "clock_in",
        "steps": [
          "Announce shift start",
          "Confirm assignments from manifest",
          "Confirm security packet presence (green checks)",
          "Verify certifications current",
          "Log clock-in timestamp"
        ]
      },
      {
        "id": "SOP-002",
        "name": "Execute",
        "phase": "execution",
        "steps": [
          "Run wave plan per manifest",
          "Emit only sanitized status events",
          "Request approval for anything beyond baseline",
          "Report anomalies immediately",
          "Maintain evidence trail"
        ]
      },
      {
        "id": "SOP-003",
        "name": "Verify",
        "phase": "verification",
        "steps": [
          "Run health checks",
          "Generate attestations",
          "Seal evidence pointers",
          "Validate outputs match expected",
          "Flag discrepancies"
        ]
      },
      {
        "id": "SOP-004",
        "name": "Debrief",
        "phase": "debrief",
        "steps": [
          "Summarize learnings",
          "File improvement notes (bounded optimizations only)",
          "Document incidents if any",
          "Prepare handoff notes",
          "Log lessons learned"
        ]
      },
      {
        "id": "SOP-005",
        "name": "Clock Out",
        "phase": "clock_out",
        "steps": [
          "Lock metrics",
          "Finalize receipt hash",
          "Update availability status",
          "Seal flight recorder",
          "Log clock-out timestamp"
        ]
      }
    ]
  }
}
