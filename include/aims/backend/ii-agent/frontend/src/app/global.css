@import 'tailwindcss';

/* @import './satoshi.css'; */
@import './github-markdown.css';
@import './animations.css';

@custom-variant dark (&:where(.dark, .dark *));

@theme {
    --color-mist: #d5dce0;
    --color-sky-blue: #bee6f0;
    --color-sky-blue-2: #a6ffff;
    --color-sky-blue-3: #bae9f4;
    --color-sky-blue-4: #87e7ff;
    --color-violet: #632af5;
    --color-pewter: #919eae;
    --color-slate: #56696d;
    --color-charcoal: #0f1117;
    --color-charcoal-light: #161822;
    --color-charcoal-surface: #1a1d2e;
    --color-sidebar-border: rgba(229, 231, 235, 0.3);
    --color-black: #212121;
    --color-yellow: #ffde8a;
    --color-green: #006600;
    --color-grey: #e5e7eb;
    --color-grey-2: #c7c7c7;
    --color-grey-3: #fbfbfb;
    --color-firefly: #0f2b33;
    --color-red: #ff6b75;
    --color-red-2: #f54260;
    --shadow-btn: 0 4px 24px rgba(0, 0, 0, 0.16);
    /* ACHEEVY-009 Brand Colors */
    --color-acheevy-purple: #a855f7;
    --color-acheevy-purple-deep: #7c3aed;
    --color-acheevy-cyan: #06b6d4;
    --color-acheevy-cyan-bright: #22d3ee;
    --color-acheevy-emerald: #10b981;
    --color-acheevy-amber: #f59e0b;
    --color-acheevy-pink: #ec4899;
    --color-acheevy-indigo: #6366f1;
    --color-acheevy-surface: rgba(255, 255, 255, 0.03);
    --color-acheevy-border: rgba(168, 85, 247, 0.15);
    --shadow-acheevy: 0 8px 32px rgba(168, 85, 247, 0.12);
    --shadow-acheevy-lg: 0 16px 64px rgba(168, 85, 247, 0.18), 0 0 0 1px rgba(168, 85, 247, 0.08);
}

@keyframes breathing-fill {
    0%,
    100% {
        background-color: theme(--color-firefly);
    }
    50% {
        background-color: theme(--color-firefly / 0.6);
    }
}

@keyframes breathing-fill-dark {
    0%,
    100% {
        background-color: theme(--color-sky-blue);
    }
    50% {
        background-color: theme(--color-sky-blue / 0.6);
    }
}

.animate-breathing-fill {
    animation: breathing-fill 2s ease-in-out infinite;
}

.dark .animate-breathing-fill {
    animation: breathing-fill-dark 2s ease-in-out infinite;
}

@layer base {
    html {
        @apply h-full overscroll-none;
    }
    body {
        font-family:
            -apple-system,
            BlinkMacSystemFont,
            Segoe UI Variable Display,
            Segoe UI,
            Helvetica,
            Apple Color Emoji,
            Arial,
            sans-serif,
            Segoe UI Emoji,
            Segoe UI Symbol;
    }
    html.dark body {
        @apply bg-charcoal;
        background-image: radial-gradient(ellipse at 20% 0%, rgba(168, 85, 247, 0.06) 0%, transparent 50%),
                          radial-gradient(ellipse at 80% 100%, rgba(6, 182, 212, 0.04) 0%, transparent 50%);
    }
    html.light body {
        @apply bg-white text-black;
    }

    html.light .monaco-editor {
        --vscode-editorGutter-background: #e5e7eb !important;
        --vscode-editor-background: #e5e7eb !important;
        --vscode-editorStickyScroll-background: #e5e7eb !important;
    }

    /* Allow text selection in message content and code blocks */
    .markdown-body,
    .markdown-body *,
    pre,
    pre *,
    code,
    code *,
    .select-text,
    .select-text * {
        @apply select-text;
    }

    .markdown-body pre > code {
        @apply !whitespace-break-spaces md:whitespace-pre;
    }

    .markdown-body table {
        @apply !w-[calc(100vw-72px)] md:w-full;
    }

    .markdown-body a {
        @apply break-all;
    }

    /* Keep UI elements non-selectable */
    button,
    nav,
    .sidebar,
    .toolbar {
        @apply select-none;
    }

    .bg-blue-gradient {
        background: #bae9f4;
        background: linear-gradient(
            90deg,
            rgba(120, 200, 210, 1) 0%,
            rgba(186, 233, 244, 1) 50%
        );
    }

    .bg-black-gradient {
        background: linear-gradient(
            180deg,
            rgba(24, 30, 28, 0.8) 0%,
            rgba(24, 30, 28, 0) 40%,
            rgba(24, 30, 28, 0) 70%,
            rgba(24, 30, 28, 0.8) 100%
        );
    }

    .bg-white-gradient {
        background: linear-gradient(
            180deg,
            rgba(255, 255, 255, 0.8) 0%,
            rgba(255, 255, 255, 0) 40%,
            rgba(255, 255, 255, 0) 70%,
            rgba(255, 255, 255, 0.8) 100%
        );
    }

    html.dark .bg-white-gradient {
        background: linear-gradient(
            180deg,
            rgba(24, 30, 28, 0.8) 0%,
            rgba(24, 30, 28, 0) 40%,
            rgba(24, 30, 28, 0) 70%,
            rgba(24, 30, 28, 0.8) 100%
        );
    }

    .terminal {
        @apply h-full p-4;
    }

    .terminal .xterm-viewport {
        @apply !h-[325px];
    }

    .animate-spin {
        animation-duration: 800ms !important;
    }

    .xterm-screen {
        @apply !w-full !h-full;
    }

    .xterm-rows div {
        @apply !w-full;
    }

    [data-slide-id] {
        width: 100% !important;
    }
}

div[data-code-block-container] {
    @apply w-full max-w-[calc(100vw-24px)];
}

.conversation > div {
    @apply !h-[calc(100vh-197px)] md:!h-[calc(100vh-201px)] px-3 md:px-4;
}

.conversation.with-files > div {
    @apply !h-[calc(100vh-272px)] md:!h-[calc(100vh-281px)];
}

.conversation.share-conversation > div {
    @apply !h-full;
}

.katex-display {
    @apply max-w-[calc(100vw-24px)] overflow-x-auto overflow-y-hidden;
}

div[data-streamdown='table-wrapper'] {
    @apply w-full max-w-[calc(100vw-24px)];
}

div[data-code-block-container='true'],
.code-block {
    @apply max-w-[calc(100vw-24px)] !overflow-auto;
}

div[data-code-block-container='true'],
.code-block pre {
    @apply !bg-firefly/10 dark:!bg-sky-blue/10 !border-none !overflow-auto;
}

div[data-code-block-container='true'] pre {
    @apply !bg-transparent !border-none;
}

div[data-code-block-container='true'] div[data-streamdown='code-block'] {
    @apply !border-none md:!max-w-[calc(100vw-300px)];
}

table[data-streamdown='table'] {
    @apply !border-none;
}

table[data-streamdown='table'] tr {
    @apply !border-neutral-200 dark:!border-white/30;
}

table[data-streamdown='table'] tbody tr:last-child {
    @apply !border-none;
}

hr[data-streamdown='horizontal-rule'] {
    @apply !border-neutral-200 dark:!border-white/30;
}

ol[data-streamdown='ordered-list'] {
    @apply list-decimal;
}

div[data-streamdown='mermaid-block'] {
    @apply !bg-firefly/10 dark:!bg-sky-blue/10 !border-none;
}

div[data-streamdown='mermaid-block'] .messageText,
div[data-streamdown='mermaid-block'] #arrowhead path {
    @apply !fill-black dark:!fill-white;
}

div[data-streamdown='mermaid-block'] .loopText,
div[data-streamdown='mermaid-block'] .loopText tspan {
    @apply !fill-black dark:!fill-white;
}

div[data-streamdown='mermaid-block'] .messageLine0,
.messageLine1,
.flowchart-link {
    @apply !stroke-black dark:!stroke-white;
}

/* ========== ACHEEVY-009 Brand Utilities ========== */

/* Brand gradient backgrounds */
.acheevy-bg-gradient {
    background: linear-gradient(135deg, rgba(168, 85, 247, 0.08), rgba(6, 182, 212, 0.06), rgba(16, 185, 129, 0.04));
}

html.dark .acheevy-bg-gradient {
    background: linear-gradient(135deg, rgba(168, 85, 247, 0.12), rgba(6, 182, 212, 0.08), rgba(16, 185, 129, 0.05));
}

/* Brand sidebar styling */
html.dark .acheevy-sidebar {
    background: linear-gradient(180deg, #0f1117 0%, #12131f 50%, #0f1117 100%) !important;
    border-right: 1px solid rgba(168, 85, 247, 0.12) !important;
}

/* Brand card with subtle gradient border */
.acheevy-card {
    position: relative;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(168, 85, 247, 0.12);
    border-radius: 16px;
    transition: all 0.3s ease;
}

.acheevy-card:hover {
    border-color: rgba(168, 85, 247, 0.25);
    box-shadow: 0 8px 32px rgba(168, 85, 247, 0.1);
}

/* Brand primary button */
.acheevy-btn-primary {
    background: linear-gradient(135deg, #a855f7, #7c3aed) !important;
    color: white !important;
    border: none !important;
    box-shadow: 0 4px 16px rgba(168, 85, 247, 0.3);
    transition: all 0.3s ease;
}

.acheevy-btn-primary:hover {
    background: linear-gradient(135deg, #9333ea, #6d28d9) !important;
    box-shadow: 0 6px 24px rgba(168, 85, 247, 0.4);
    transform: translateY(-1px);
}

/* Brand secondary button */
.acheevy-btn-secondary {
    background: rgba(168, 85, 247, 0.1) !important;
    color: #a855f7 !important;
    border: 1px solid rgba(168, 85, 247, 0.2) !important;
    transition: all 0.3s ease;
}

.acheevy-btn-secondary:hover {
    background: rgba(168, 85, 247, 0.15) !important;
    border-color: rgba(168, 85, 247, 0.3) !important;
}

/* Brand input focus */
html.dark input:focus,
html.dark textarea:focus {
    border-color: rgba(168, 85, 247, 0.4) !important;
    box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1) !important;
}

/* Brand scrollbar */
html.dark ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

html.dark ::-webkit-scrollbar-track {
    background: transparent;
}

html.dark ::-webkit-scrollbar-thumb {
    background: rgba(168, 85, 247, 0.2);
    border-radius: 3px;
}

html.dark ::-webkit-scrollbar-thumb:hover {
    background: rgba(168, 85, 247, 0.35);
}

/* Brand header border gradient */
.acheevy-header-border {
    border-bottom: 1px solid transparent;
    border-image: linear-gradient(90deg, transparent, rgba(168, 85, 247, 0.2), rgba(6, 182, 212, 0.15), transparent) 1;
}

/* Subtle noise texture overlay for depth */
html.dark .acheevy-texture::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.015;
    pointer-events: none;
    z-index: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
}
