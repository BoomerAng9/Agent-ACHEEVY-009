{
  "$schema": "https://aims.dev/schemas/deploy-capability-registry.json",
  "name": "Deploy Capability Registry",
  "version": "2.0.0",
  "description": "Registry of all permitted operations in the Deploy Platform yard",
  "visual_metaphor": "Container yard with cranes, crew, and traffic control",

  "execution_backend": {
    "description": "Available execution backends for Deploy operations",
    "enum": ["Chicken Hawk", "AgentZero", "n8n"],
    "default": "Chicken Hawk",
    "backends": {
      "Chicken Hawk": {
        "description": "Chicken Hawk execution engine - spawns Lil_Hawks via Squads",
        "type": "native",
        "worker_type": "Lil_Hawk"
      },
      "AgentZero": {
        "description": "Agent Zero autonomous execution",
        "type": "external",
        "worker_type": "agent"
      },
      "n8n": {
        "description": "n8n workflow automation",
        "type": "external",
        "worker_type": "workflow"
      }
    }
  },

  "categories": {
    "crane_ops": {
      "name": "Crane Ops",
      "description": "Lift/move/place primitives - cranes lifting containers into lanes",
      "crew_owner": "CraneOps_Ang",
      "capabilities": [
        {
          "id": "deploy_workload",
          "name": "Deploy Workload",
          "description": "Deploy a new workload container to the yard",
          "badge_level": "green",
          "crew_role": "CTO_Ang",
          "requires_approval": true,
          "luc_metered": true
        },
        {
          "id": "scale_workload_group",
          "name": "Scale Workload Group",
          "description": "Scale up or down a group of workload containers",
          "badge_level": "amber",
          "crew_role": "CTO_Ang",
          "requires_approval": true,
          "luc_metered": true
        },
        {
          "id": "rolling_update",
          "name": "Rolling Update",
          "description": "Incrementally update containers without downtime",
          "badge_level": "amber",
          "crew_role": "CTO_Ang",
          "requires_approval": true,
          "luc_metered": true
        },
        {
          "id": "blue_green_swap",
          "name": "Blue/Green Swap",
          "description": "Switch traffic between blue and green deployments",
          "badge_level": "amber",
          "crew_role": "CTO_Ang",
          "requires_approval": true,
          "luc_metered": true
        },
        {
          "id": "canary_deploy",
          "name": "Canary Deploy",
          "description": "Deploy to a subset of traffic for validation",
          "badge_level": "green",
          "crew_role": "CTO_Ang",
          "requires_approval": true,
          "luc_metered": true
        },
        {
          "id": "rollback_restore",
          "name": "Rollback / Restore",
          "description": "Revert to a previous known-good state",
          "badge_level": "red",
          "crew_role": "CTO_Ang",
          "requires_approval": true,
          "luc_metered": false
        },
        {
          "id": "terminate_workload",
          "name": "Terminate Workload",
          "description": "Permanently remove a workload from the yard",
          "badge_level": "red",
          "crew_role": "CTO_Ang",
          "requires_approval": true,
          "luc_metered": false
        },
        {
          "id": "health_check_workload",
          "name": "Health Check Workload",
          "description": "Verify workload is running correctly",
          "badge_level": "green",
          "crew_role": "COO_Ang",
          "requires_approval": false,
          "luc_metered": false
        }
      ]
    },

    "yard_ops": {
      "name": "Yard Ops",
      "description": "Placement, routing, isolation - container stacking discipline + yard layout control",
      "crew_owner": "YardOps_Ang",
      "capabilities": [
        {
          "id": "assign_tenant_lane",
          "name": "Assign Tenant Lane",
          "description": "Assign a workload to a specific tenant lane",
          "badge_level": "green",
          "crew_role": "COO_Ang",
          "requires_approval": true,
          "luc_metered": false
        },
        {
          "id": "bind_network_policy",
          "name": "Bind Network Policy",
          "description": "Apply network isolation rules to workload",
          "badge_level": "amber",
          "crew_role": "CTO_Ang",
          "requires_approval": true,
          "luc_metered": false
        },
        {
          "id": "attach_storage_volume",
          "name": "Attach Storage Volume",
          "description": "Mount persistent storage to a workload",
          "badge_level": "green",
          "crew_role": "CTO_Ang",
          "requires_approval": true,
          "luc_metered": true
        },
        {
          "id": "release_storage_volume",
          "name": "Release Storage Volume",
          "description": "Detach storage from a workload",
          "badge_level": "amber",
          "crew_role": "CTO_Ang",
          "requires_approval": true,
          "luc_metered": false
        },
        {
          "id": "quarantine_workload",
          "name": "Quarantine Workload",
          "description": "Isolate a workload due to security or health concerns",
          "badge_level": "red",
          "crew_role": "COO_Ang",
          "requires_approval": false,
          "luc_metered": false
        },
        {
          "id": "rebalance_resources",
          "name": "Rebalance Resources",
          "description": "Redistribute workloads across available capacity",
          "badge_level": "amber",
          "crew_role": "CFO_Ang",
          "requires_approval": true,
          "luc_metered": true
        }
      ]
    },

    "dispatch_ops": {
      "name": "Dispatch Ops",
      "description": "Work orders and sequencing - Boomer_Angs with wands/signals guiding traffic",
      "crew_owner": "DispatchOps_Ang",
      "capabilities": [
        {
          "id": "create_manifest",
          "name": "Create Manifest from ACHEEVY Plan",
          "description": "Generate a deployment manifest from ACHEEVY's approved plan",
          "badge_level": "green",
          "crew_role": "CEO_Ang",
          "requires_approval": false,
          "luc_metered": false
        },
        {
          "id": "split_manifest_waves",
          "name": "Split Manifest into Waves",
          "description": "Break a manifest into sequential execution waves",
          "badge_level": "green",
          "crew_role": "COO_Ang",
          "requires_approval": false,
          "luc_metered": false
        },
        {
          "id": "enforce_concurrency_caps",
          "name": "Enforce Concurrency Caps",
          "description": "Limit parallel operations based on capacity",
          "badge_level": "green",
          "crew_role": "COO_Ang",
          "requires_approval": false,
          "luc_metered": false
        },
        {
          "id": "pause_shift",
          "name": "Pause Shift",
          "description": "Temporarily halt execution of current shift",
          "badge_level": "amber",
          "crew_role": "COO_Ang",
          "requires_approval": false,
          "luc_metered": false
        },
        {
          "id": "resume_shift",
          "name": "Resume Shift",
          "description": "Continue execution of paused shift",
          "badge_level": "green",
          "crew_role": "COO_Ang",
          "requires_approval": true,
          "luc_metered": false
        },
        {
          "id": "route_fallback_capacity",
          "name": "Route to Fallback Capacity",
          "description": "Redirect workloads to backup infrastructure",
          "badge_level": "red",
          "crew_role": "CTO_Ang",
          "requires_approval": true,
          "luc_metered": true
        }
      ]
    },

    "safety_ops": {
      "name": "Safety Ops",
      "description": "Always-on guarantees - safety lines and rules that prevent accidents",
      "crew_owner": "SafetyOps_Ang",
      "capabilities": [
        {
          "id": "budget_guard",
          "name": "Budget Guard (LUC Gates)",
          "description": "Enforce spending limits via LUC checks",
          "badge_level": "green",
          "crew_role": "CFO_Ang",
          "requires_approval": false,
          "luc_metered": false,
          "always_active": true
        },
        {
          "id": "rate_limits",
          "name": "Rate Limits",
          "description": "Enforce request/operation rate limits",
          "badge_level": "green",
          "crew_role": "COO_Ang",
          "requires_approval": false,
          "luc_metered": false,
          "always_active": true
        },
        {
          "id": "kill_switch",
          "name": "Kill Switch Readiness",
          "description": "Maintain ability to halt all operations instantly",
          "badge_level": "red",
          "crew_role": "CEO_Ang",
          "requires_approval": false,
          "luc_metered": false,
          "always_active": true
        },
        {
          "id": "incident_creation",
          "name": "Incident Creation + Escalation",
          "description": "Create and escalate incidents when thresholds breached",
          "badge_level": "amber",
          "crew_role": "COO_Ang",
          "requires_approval": false,
          "luc_metered": false,
          "always_active": true
        },
        {
          "id": "auto_rollback_threshold",
          "name": "Automated Rollback Threshold Enforcement",
          "description": "Trigger automatic rollback when error rates exceed threshold",
          "badge_level": "red",
          "crew_role": "CTO_Ang",
          "requires_approval": false,
          "luc_metered": false,
          "always_active": true
        }
      ]
    },

    "invisible_ops": {
      "name": "Invisible Ops",
      "description": "Background maintenance crew - the yard looks calm because crew is always working",
      "crew_owner": "LoadOps_Ang",
      "capabilities": [
        {
          "id": "cleanup_orphaned",
          "name": "Clean Up Orphaned Workloads",
          "description": "Remove workloads with no owner or expired lease",
          "badge_level": "green",
          "crew_role": "COO_Ang",
          "requires_approval": false,
          "luc_metered": false,
          "background": true
        },
        {
          "id": "rotate_logs",
          "name": "Rotate Logs",
          "description": "Archive and rotate log files",
          "badge_level": "green",
          "crew_role": "COO_Ang",
          "requires_approval": false,
          "luc_metered": false,
          "background": true
        },
        {
          "id": "prewarm_images",
          "name": "Prewarm Images",
          "description": "Pre-pull container images to reduce cold start",
          "badge_level": "green",
          "crew_role": "CTO_Ang",
          "requires_approval": false,
          "luc_metered": true,
          "background": true
        },
        {
          "id": "auto_heal",
          "name": "Auto-Heal Common Faults",
          "description": "Automatically recover from known failure patterns",
          "badge_level": "amber",
          "crew_role": "CTO_Ang",
          "requires_approval": false,
          "luc_metered": false,
          "background": true
        },
        {
          "id": "drift_detection",
          "name": "Drift Detection",
          "description": "Detect configuration mismatches between desired and actual state",
          "badge_level": "amber",
          "crew_role": "CTO_Ang",
          "requires_approval": false,
          "luc_metered": false,
          "background": true
        }
      ]
    }
  },

  "badge_levels": {
    "green": {
      "name": "Low Risk",
      "description": "Safe operations with minimal impact",
      "color": "#22C55E",
      "auto_approve_eligible": true
    },
    "amber": {
      "name": "Medium Risk",
      "description": "Operations requiring attention and verification",
      "color": "#F59E0B",
      "auto_approve_eligible": false
    },
    "red": {
      "name": "High Risk",
      "description": "Critical operations requiring explicit approval",
      "color": "#EF4444",
      "auto_approve_eligible": false
    }
  },

  "crew_roles": {
    "CEO_Ang": {
      "name": "Chief Executive Ang",
      "description": "Strategic oversight and kill switch authority",
      "supervisor": true
    },
    "CTO_Ang": {
      "name": "Chief Technology Ang",
      "description": "Technical operations and architecture decisions",
      "supervisor": true
    },
    "COO_Ang": {
      "name": "Chief Operations Ang",
      "description": "Day-to-day operations and incident management",
      "supervisor": true
    },
    "CFO_Ang": {
      "name": "Chief Financial Ang",
      "description": "Budget enforcement and cost optimization",
      "supervisor": true
    },
    "CraneOps_Ang": {
      "name": "Crane Operations Ang",
      "description": "Primary lift/move/place workers",
      "supervisor": false
    },
    "YardOps_Ang": {
      "name": "Yard Operations Ang",
      "description": "Routing and placement workers",
      "supervisor": false
    },
    "SafetyOps_Ang": {
      "name": "Safety Operations Ang",
      "description": "Budget, kill switch, and incident workers",
      "supervisor": false
    },
    "LoadOps_Ang": {
      "name": "Load Operations Ang",
      "description": "Artifact hauling, logs, and exports workers",
      "supervisor": false
    },
    "DispatchOps_Ang": {
      "name": "Dispatch Operations Ang",
      "description": "Sequencing and wave control workers",
      "supervisor": false
    }
  }
}
