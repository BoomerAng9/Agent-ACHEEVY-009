{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://aims.dev/schemas/lil-hawk-career-record.json",
  "title": "Lil_Hawk Career Record",
  "version": "1.0.0",
  "description": "Complete profile, performance history, and promotion tracking for a Lil_Hawk",

  "type": "object",
  "required": ["identity", "designation", "careerLevel", "certifications", "performanceRecord"],

  "properties": {
    "identity": {
      "type": "object",
      "required": ["canonicalId", "personaHandle", "kybSerialId", "createdAt"],
      "properties": {
        "canonicalId": {
          "type": "string",
          "pattern": "^Lil_[A-Za-z]+_Hawk_SFT-[0-9]{3}-[0-9]{3}$",
          "description": "Machine-safe audit ID"
        },
        "personaHandle": {
          "type": "string",
          "pattern": "^Lil_[A-Za-z]+_Hawk$",
          "description": "Human-friendly designation"
        },
        "displayName": {
          "type": "string",
          "description": "Full display name with role"
        },
        "kybSerialId": {
          "type": "string",
          "description": "KYB identity reference"
        },
        "passportPointer": {
          "type": "string",
          "description": "Reference to KYB passport document"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "spawnedBy": {
          "type": "string",
          "description": "Chicken Hawk that spawned this Lil_Hawk"
        }
      }
    },

    "designation": {
      "type": "object",
      "required": ["role", "crewOps", "specialty"],
      "properties": {
        "role": {
          "type": "string",
          "description": "Job designation name"
        },
        "crewOps": {
          "type": "string",
          "enum": ["CraneOps", "YardOps", "SafetyOps", "LoadOps", "DispatchOps"]
        },
        "specialty": {
          "type": "string",
          "description": "Specific area of expertise"
        },
        "vibe": {
          "type": "string",
          "description": "Personality trait for captions"
        },
        "comedyArchetype": {
          "type": "string",
          "enum": ["quickwit", "drybar", "storytime", "motivator", "caffeinated", "philosopher", "none"]
        }
      }
    },

    "careerLevel": {
      "type": "object",
      "required": ["level", "title", "since"],
      "properties": {
        "level": {
          "type": "integer",
          "minimum": 1,
          "maximum": 6
        },
        "title": {
          "type": "string",
          "enum": ["Hatchling", "Apprentice", "Journeyman", "Foreman", "Chicken Hawk_Candidate", "Chicken Hawk"]
        },
        "prefix": {
          "type": "string",
          "description": "Title prefix for display"
        },
        "since": {
          "type": "string",
          "format": "date-time"
        },
        "promotionEligible": {
          "type": "boolean"
        },
        "nextReviewWindow": {
          "type": "string",
          "format": "date-time"
        }
      }
    },

    "certifications": {
      "type": "object",
      "properties": {
        "earned": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "certId": {"type": "string"},
              "name": {"type": "string"},
              "earnedAt": {"type": "string", "format": "date-time"},
              "expiresAt": {"type": "string", "format": "date-time"},
              "renewalRequired": {"type": "boolean"}
            }
          }
        },
        "inProgress": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "certId": {"type": "string"},
              "startedAt": {"type": "string", "format": "date-time"},
              "progress": {"type": "number", "minimum": 0, "maximum": 100}
            }
          }
        },
        "required": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Certifications required for next level"
        }
      }
    },

    "performanceRecord": {
      "type": "object",
      "required": ["shiftsCompleted", "scores"],
      "properties": {
        "shiftsCompleted": {
          "type": "integer",
          "minimum": 0
        },
        "scores": {
          "type": "object",
          "properties": {
            "quality": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Pass rate of checks, verify outcomes"
            },
            "safety": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Zero violations, no anomaly triggers, policy adherence"
            },
            "efficiency": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Time-to-stable, wave success rate, reduced retries"
            },
            "discipline": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "SOP compliance, debrief completion, evidence sealing"
            },
            "overall": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Weighted composite score"
            }
          }
        },
        "activityBreedsActivity": {
          "type": "object",
          "description": "Activity KPIs",
          "properties": {
            "outputDelivered": {"type": "integer"},
            "incidentsAvoided": {"type": "integer"},
            "timeSavedMs": {"type": "integer"},
            "artifactsVerified": {"type": "integer"},
            "score": {"type": "number", "description": "Computed from formula"}
          }
        },
        "trends": {
          "type": "object",
          "properties": {
            "qualityTrend": {"type": "string", "enum": ["improving", "stable", "declining"]},
            "efficiencyTrend": {"type": "string", "enum": ["improving", "stable", "declining"]},
            "overallTrend": {"type": "string", "enum": ["improving", "stable", "declining"]}
          }
        }
      }
    },

    "disciplinaryRecord": {
      "type": "object",
      "properties": {
        "violations": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": {"type": "string", "enum": ["critical", "major", "minor"]},
              "description": {"type": "string"},
              "shiftId": {"type": "string"},
              "timestamp": {"type": "string", "format": "date-time"},
              "resolution": {"type": "string"}
            }
          }
        },
        "criticalViolationsLast100Shifts": {"type": "integer"},
        "majorViolationsLast100Shifts": {"type": "integer"},
        "cleanStreak": {"type": "integer", "description": "Consecutive shifts without violations"}
      }
    },

    "mentorship": {
      "type": "object",
      "properties": {
        "mentor": {
          "type": "string",
          "description": "Current mentor (if Hatchling/Apprentice)"
        },
        "mentees": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Current mentees (if Foreman+)"
        },
        "apprenticesMentored": {
          "type": "integer",
          "description": "Total mentored to Journeyman+"
        }
      }
    },

    "evolutionHistory": {
      "type": "object",
      "description": "Self-tuning optimization history",
      "properties": {
        "optimizationsAttempted": {"type": "integer"},
        "optimizationsSuccessful": {"type": "integer"},
        "optimizationsReverted": {"type": "integer"},
        "boundaryViolationAttempts": {"type": "integer", "description": "Should be 0"},
        "lastOptimization": {
          "type": "object",
          "properties": {
            "parameter": {"type": "string"},
            "change": {"type": "string"},
            "result": {"type": "string", "enum": ["improved", "neutral", "reverted"]},
            "timestamp": {"type": "string", "format": "date-time"}
          }
        }
      }
    },

    "squadHistory": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "squadId": {"type": "string"},
          "squadName": {"type": "string"},
          "shiftId": {"type": "string"},
          "role": {"type": "string", "enum": ["member", "lead"]},
          "performance": {"type": "number"},
          "timestamp": {"type": "string", "format": "date-time"}
        }
      }
    },

    "promotionHistory": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "fromLevel": {"type": "integer"},
          "toLevel": {"type": "integer"},
          "fromTitle": {"type": "string"},
          "toTitle": {"type": "string"},
          "promotedAt": {"type": "string", "format": "date-time"},
          "reviewScore": {"type": "number"},
          "approvedBy": {"type": "string"}
        }
      }
    }
  }
}
